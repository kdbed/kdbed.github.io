+++
title = "Pentest - Active Information Gathering"
author = ["svejk"]
tags = ["p200", "enumeration", "pentest"]
draft = false
+++

## Active Information Gathering {#active-information-gathering}


### DNS {#dns}


#### [DNS - Basics]({{< relref "dns_basics.md" >}}) {#dns-basics--dns-basics-dot-md}


#### DNS Enumeration - Basics {#dns-enumeration-basics}

DNS forward lookup brute-forcing to determine additional IPs belonging to a domain:

```shell { linenos=true, linenostart=1 }
for ip in $(cat list.txt); do host $ip.domain.com; done
```

Comprehensive lists available at [SecLists](https://github.com/danielmiessler/SecLists).
Based on IPs determined from the above, we can perform reverse lookups by scanning an associated range:

```shell { linenos=true, linenostart=1 }
for ip in $(seq 200 254); do host xxx.xxx.xxx.$ip; done | grep -v "not found"
```


#### [dnsrecon](https://github.com/darkoperator/dnsrecon) {#dnsrecon}


#### [dnsenum2](https://github.com/SparrowOchon/dnsenum2) {#dnsenum2}


#### nslookup {#nslookup}


### TCP/UDP Port Scanning {#tcp-udp-port-scanning}

Simple port scan with Netcat:

```shell { linenos=true, linenostart=1 }
nc -nvv -w 1 -z 192.168.1.2 3000-4000
```

where `-w` is timeout in seconds and `-z` specifies zero-I/O mode. TCP scans use the 3-way handshake to detect open ports.  UDP is stateless, so open port detection involves a different mechanism. Using Netcat:

```shell { linenos=true, linenostart=1 }
nc -nv -u -z -w 1 192.168.1.2 120-123
```

Here, if the destination UDP port is closed, the target should respond with an ICMP port unreachable. UDP scanning is often unreliable, as firewalls and routers may drop ICMP packets. This can lead to false positives and ports showing as open when they are, in fact, closed.


### [Recon - Port Scanning and nmap]({{< relref "recon_port_scanning_and_nmap.md" >}}) {#recon-port-scanning-and-nmap--recon-port-scanning-and-nmap-dot-md}


### Living off the Land {#living-off-the-land}

-   Windows: [lolbas](https://lolbas-project.github.io/)
-   Linux: [gtfobins](https://gtfobins.github.io/)
-   Drivers: [loldrivers](https://www.loldrivers.io/)
